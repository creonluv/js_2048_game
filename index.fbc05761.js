!function(){function e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function r(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(r,t)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var t,n=0,o=localStorage.getItem("scoreBest!!!")||0,i=document.querySelector(".start"),a=document.querySelector(".restart"),c=document.querySelector(".game-score"),u=document.querySelector(".game-score-best"),s=document.querySelector(".message-start"),d=document.querySelector(".message-lose"),f=document.querySelector(".message-win");function l(e,r){e.innerText="",e.classList.value="",e.classList.add("field-cell"),r>0&&(e.innerText=r.toString(),e.classList.add("field-cell--"+r.toString())),function(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(2048===t[e][r])return f.classList.remove("hidden"),!0}()}function m(){for(var e=0;e<4;e++)for(var r=0;r<4;r++)if(0===t[e][r])return!0;return!1}function v(){var e=!1;if(m()){for(;!e;){var r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===t[r][n]){0===Math.floor(10*Math.random())?t[r][n]=4:t[r][n]=2;var o=document.getElementById(r.toString()+"-"+n.toString());o.innerText=t[r][n].toString(),o.classList.add("field-cell--"+t[r][n]),e=!0}}(function(){if(m())return!1;for(var e=0;e<4;e++)for(var r=0;r<3;r++)if(t[e][r]===t[e][r+1]||t[r][e]===t[r+1][e])return!1;return!0})()&&d.classList.remove("hidden")}}function g(e){return e.filter(function(e){return 0!==e})}function y(e){var t=r(e);t=g(t);for(var o=0;o<t.length-1;o++)t[o]===t[o+1]&&(t[o]*=2,t[o+1]=0,n+=t[o]);for(t=g(t);t.length<4;)t.push(0);return t}i.addEventListener("click",function(){(function(){t=Array.from({length:4},function(){return[,,,,].fill(0)});for(var e=0;e<4;e++)for(var r=0;r<4;r++){var n=document.createElement("div");n.id=e.toString()+"-"+r.toString(),l(n,t[e][r]),document.querySelector(".game-field").append(n)}v(),v()})(),i.classList.add("hidden"),a.classList.remove("hidden"),s.classList.add("hidden"),u.innerText=o}),a.addEventListener("click",function(){document.querySelector(".game-field").innerHTML="",n=0,c.innerText=n,i.classList.remove("hidden"),a.classList.add("hidden"),s.classList.remove("hidden"),d.classList.add("hidden"),f.classList.add("hidden"),u.innerText=o}),document.addEventListener("keyup",function(e){var i=!1;switch(e.code){case"ArrowLeft":i=function(){for(var e=!1,n=0;n<4;n++)!function(n){var o=t[n],i=r(o);o=y(o),t[n]=o,e||i.every(function(e,r){return e===o[r]})||(e=!0);for(var a=0;a<4;a++)l(document.getElementById(n.toString()+"-"+a.toString()),t[n][a])}(n);return e}();break;case"ArrowRight":i=function(){for(var e=!1,n=0;n<4;n++)!function(n){var o=t[n],i=r(o);o.reverse(),(o=y(o)).reverse(),t[n]=o,e||i.every(function(e,r){return e===o[r]})||(e=!0);for(var a=0;a<4;a++)l(document.getElementById(n.toString()+"-"+a.toString()),t[n][a])}(n);return e}();break;case"ArrowUp":i=function(){for(var e=!1,n=0;n<4;n++)!function(n){var o=[t[0][n],t[1][n],t[2][n],t[3][n]],i=r(o);o=y(o),e||i.every(function(e,r){return e===o[r]})||(e=!0);for(var a=0;a<4;a++)t[a][n]=o[a],l(document.getElementById(a.toString()+"-"+n.toString()),t[a][n])}(n);return e}();break;case"ArrowDown":i=function(){for(var e=!1,n=0;n<4;n++)!function(n){var o=[t[0][n],t[1][n],t[2][n],t[3][n]],i=r(o);o.reverse(),(o=y(o)).reverse(),e||i.every(function(e,r){return e===o[r]})||(e=!0);for(var a=0;a<4;a++)t[a][n]=o[a],l(document.getElementById(a.toString()+"-"+n.toString()),t[a][n])}(n);return e}();break;default:alert("Please, use only arrows!")}i&&(v(),c.innerText=n,n>=o&&(o=n,u.innerText=n,localStorage.setItem("scoreBest!!!",o)))})}();
//# sourceMappingURL=index.fbc05761.js.map
