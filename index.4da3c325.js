let e;let t=0,r=localStorage.getItem("scoreBest!!!")||0;const n=document.querySelector(".start"),o=document.querySelector(".restart"),l=document.querySelector(".game-score"),i=document.querySelector(".game-score-best"),s=document.querySelector(".message-start"),d=document.querySelector(".message-lose"),c=document.querySelector(".message-win");function a(t,r){t.innerText="",t.classList.value="",t.classList.add("field-cell"),r>0&&(t.innerText=r.toString(),t.classList.add("field-cell--"+r.toString())),function(){for(let t=0;t<4;t++)for(let r=0;r<4;r++)if(2048===e[t][r])return c.classList.remove("hidden"),!0}()}function u(){for(let t=0;t<4;t++)for(let r=0;r<4;r++)if(0===e[t][r])return!0;return!1}function f(){let t=!1;if(u()){for(;!t;){let r=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===e[r][n]){0===Math.floor(10*Math.random())?e[r][n]=4:e[r][n]=2;let o=document.getElementById(r.toString()+"-"+n.toString());o.innerText=e[r][n].toString(),o.classList.add("field-cell--"+e[r][n]),t=!0}}(function(){if(u())return!1;for(let t=0;t<4;t++)for(let r=0;r<3;r++)if(e[t][r]===e[t][r+1]||e[r][t]===e[r+1][t])return!1;return!0})()&&d.classList.remove("hidden")}}function m(e){return e.filter(e=>0!==e)}function g(e){let r=[...e];r=m(r);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]*=2,r[e+1]=0,t+=r[e]);for(r=m(r);r.length<4;)r.push(0);return r}n.addEventListener("click",function(){(function(){e=Array.from({length:4},()=>[,,,,].fill(0));for(let t=0;t<4;t++)for(let r=0;r<4;r++){let n=document.createElement("div");n.id=t.toString()+"-"+r.toString(),a(n,e[t][r]),document.querySelector(".game-field").append(n)}f(),f()})(),n.classList.add("hidden"),o.classList.remove("hidden"),s.classList.add("hidden"),i.innerText=r}),o.addEventListener("click",function(){document.querySelector(".game-field").innerHTML="",t=0,l.innerText=t,n.classList.remove("hidden"),o.classList.add("hidden"),s.classList.remove("hidden"),d.classList.add("hidden"),c.classList.add("hidden"),i.innerText=r}),document.addEventListener("keyup",n=>{let o=!1;switch(n.code){case"ArrowLeft":o=function(){let t=!1;for(let r=0;r<4;r++){let n=e[r],o=[...n];n=g(n),e[r]=n,t||o.every((e,t)=>e===n[t])||(t=!0);for(let t=0;t<4;t++)a(document.getElementById(r.toString()+"-"+t.toString()),e[r][t])}return t}();break;case"ArrowRight":o=function(){let t=!1;for(let r=0;r<4;r++){let n=e[r],o=[...n];n.reverse(),(n=g(n)).reverse(),e[r]=n,t||o.every((e,t)=>e===n[t])||(t=!0);for(let t=0;t<4;t++)a(document.getElementById(r.toString()+"-"+t.toString()),e[r][t])}return t}();break;case"ArrowUp":o=function(){let t=!1;for(let r=0;r<4;r++){let n=[e[0][r],e[1][r],e[2][r],e[3][r]],o=[...n];n=g(n),t||o.every((e,t)=>e===n[t])||(t=!0);for(let t=0;t<4;t++)e[t][r]=n[t],a(document.getElementById(t.toString()+"-"+r.toString()),e[t][r])}return t}();break;case"ArrowDown":o=function(){let t=!1;for(let r=0;r<4;r++){let n=[e[0][r],e[1][r],e[2][r],e[3][r]],o=[...n];n.reverse(),(n=g(n)).reverse(),t||o.every((e,t)=>e===n[t])||(t=!0);for(let t=0;t<4;t++)e[t][r]=n[t],a(document.getElementById(t.toString()+"-"+r.toString()),e[t][r])}return t}();break;default:alert("Please, use only arrows!")}o&&(f(),l.innerText=t,t>=r&&(r=t,i.innerText=t,localStorage.setItem("scoreBest!!!",r)))});
//# sourceMappingURL=index.4da3c325.js.map
